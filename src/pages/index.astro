---
import { type CollectionEntry, getCollection } from "astro:content";
import PostPreview from "@/components/blog/PostPreview.astro";
import Note from "@/components/note/Note.astro";
import { getAllPosts } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";
import { collectionDateSort } from "@/utils/date";

// Posts
const MAX_POSTS = 10;
const allPosts = await getAllPosts();
const allPostsByDate = allPosts.sort(collectionDateSort) as CollectionEntry<"post">[];
const latestPosts = allPostsByDate.slice(0, MAX_POSTS);

// Pinned Posts, set to a max of 3;
const MAX_PINNED_POSTS = 3;
const pinnedPosts = allPostsByDate.filter((p) => p.data.pinned).slice(0, MAX_PINNED_POSTS);

// Notes
const MAX_NOTES = 5;
const allNotes = await getCollection("note");
const latestNotes = allNotes
	.sort(collectionDateSort)
	.slice(0, MAX_NOTES) as CollectionEntry<"note">[];
---

<PageLayout meta={{ title: "Home" }}>
<section class="hero-wrapper">

  <h1 class="title hello-title">Hello,</h1>

  <div class="hero-container">
    <img src="/profile.jpeg" alt="Profile Photo" class="hero-photo" />

    <div class="hero-text">
      <p>
        I am a PhD student in Computational Science and Engineering (home unit in Aerospace 
        Engineering) at Georgia Tech. I joined 
        <a href="https://www.elizabethqian.com/research/ace-group" target="_blank">ACE group</a>
        in Fall 2023 and have been working with 
        <a href="https://www.elizabethqian.com/" target="_blank">Dr. Elizabeth Qian</a>.
        Before joining the group, I received my master's in Aerospace Engineering, primarily working 
        on surrogate modeling for engineering applications. My current research focuses on 
        methodological development in multifidelity machine learning, leveraging both expensive 
        high- and cheap low-fidelity data.
      </p>
    </div>
  </div>

</section>

<style>
  .hello-title {
    margin-bottom: 1rem !important;
    margin-top: 0 !important;
    padding-top: 0 !important;
    display: block;
  }

  .hero-container {
    display: flex;
    align-items: flex-start;
    gap: 2rem;
  }

  .hero-photo {
    width: 260px;
    height: 260px;
    object-fit: cover;
    border-radius: 8px;
    flex-shrink: 0;
  }

  .hero-text {
    flex: 1;
    display: flex;
    align-items: center;
  }

  .hero-text p {
    margin: 0;
    line-height: 1.6;
  }

  /* hyperlink blue */
  .hero-text a {
    color: #0066cc !important;
    text-decoration: underline;
  }
</style>
<!--
	{
		pinnedPosts.length > 0 && (
			<section class="mt-16">
				<h2 class="title mb-6 text-xl">Pinned Posts</h2>
				<ul class="space-y-4" role="list">
					{pinnedPosts.map((p) => (
						<li class="grid gap-1 sm:grid-cols-[auto_1fr]">
							<PostPreview post={p} />
						</li>
					))}
				</ul>
			</section>
		)
	}
	<section class="mt-16">
		<h2 class="title text-accent mb-6 text-xl"><a href="/posts/">Posts</a></h2>
		<ul class="space-y-4" role="list">
			{
				latestPosts.map((p) => (
					<li class="grid gap-1 sm:grid-cols-[auto_1fr]">
						<PostPreview post={p} />
					</li>
				))
			}
		</ul>
	</section>
	{
		latestNotes.length > 0 && (
			<section class="mt-16">
				<h2 class="title text-accent mb-6 text-xl">
					<a href="/notes/">Notes</a>
				</h2>
				<ul class="space-y-6" role="list">
					{latestNotes.map((note) => (
						<li>
							<Note note={note} as="h3" isPreview />
						</li>
					))}
				</ul>
			</section>
		)
	}
-->
</PageLayout>
